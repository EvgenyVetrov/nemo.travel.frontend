<!-- nemo-hotels-form_compact || nemo-hotels-form_twoThirds -->
<div class="nemo-hotels-form js-autofocus-form js-nemoApp__component"> <!-- MODIFIERS: nemo-hotels-form_compact || nemo-hotels-form_twoThirds -->
                                                                        <!-- ko if: !$$loading() && !$$error() -->

    <div class="nemo-hotels-form__formContainer">
        <div class="nemo-hotels-form__formContainer__inner">
            <div class="nemo-hotels-form__staying" data-bind="foreach: segments(), hotelsFormAutoFocus: null">
                <div data-bind="attr: {'class': 'nemo-hotels-form__staying__segment js-autofocus-segment'}">
                    <div class="nemo-hotels-form__staying__segment__item nemo-hotels-form__staying__segment__item_to js-nemo-hotels-autocomplete"
                         data-bind="css: {'nemo-hotels-form__staying__segment__item_hasError': $parent.validaTERROR() && items.arrival.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput js-autocomplete">
                            <!-- ko if: $parent.validaTERROR() && items.arrival.error() && items.arrival.focus() -->
                            <div class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__staying__segment__item__error"
                                 data-bind="text: $root.i18n('HotelsSearchForm','error_hotels_arrival_'+items.arrival.error())"></div>
                            <!-- /ko -->
                            <div class="nemo-hotels-form__staying__segment__item__inputContainer"><input
                                    class=" nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__staying__segment__input nemo-hotels-form__staying__segment__input_autocomplete js-autofocus-field js-autofocus-field_arrival"
                                    type="text"
                                    data-bind="hotelsFormGeoAC: items.arrival.value, hasFocus: items.arrival.focus,attr: {placeholder: $root.i18n('HotelsSearchForm','segments__arrival__placeholder')}">

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__staying__segment__item__dummy js-autocomplete-dummy">
                                    <!-- ko if: !items.arrival.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder js-autocomplete-dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__arrival__placeholder')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrival.value() -->
                                    <!-- ko with: items.arrival.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main js-autocomplete-dummy__main"
                                        data-bind="text: name">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux js-autocomplete-dummy__aux"
                                        data-bind="text: ', ' + country">
                                    </span>
                                    <!-- /ko -->
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <div class="nemo-hotels-form__staying__segment__item nemo-hotels-form__staying__segment__item_date nemo-hotels-form__staying__segment__item_date_to"
                         data-bind="css: {'nemo-hotels-form__staying__segment__item_hasError': $parent.validaTERROR() && items.arrivalDate.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput nemo-hotels-form__staying__segment__item__date">
                            <div class="nemo-hotels-form__staying__segment__item__date__indicator"
                                 data-bind="text: items.arrivalDate.value() ? items.arrivalDate.value().getDate() : 31">
                            </div>
                            <div class="nemo-hotels-form__staying__segment__item__inputContainer">
                                <input
                                    class="nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__staying__segment__input nemo-hotels-form__staying__segment__input_date js-autofocus-field js-autofocus-field_date_arrival"
                                    type="text"
                                    data-bind="attr: {placeholder: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')},hotelsFormDatepicker: items.arrivalDate.value,css: 'nemo-hotels-form__staying__segment__input_date_back',hasFocus: items.arrivalDate.focus" />

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__staying__segment__item__dummy nemo-hotels-form__staying__segment__item__date__dummy nemo-hotels-form__staying__segment__item__date__dummy_full">
                                    <!-- ko if: !items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main"
                                        data-bind="text: items.arrivalDate.value().getDate()+' '+items.arrivalDate.value().getMonthName()">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux"
                                        data-bind="text: ', '+items.arrivalDate.value().getDOWName()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__staying__segment__item__dummy nemo-hotels-form__staying__segment__item__date__dummy nemo-hotels-form__staying__segment__item__date__dummy_short">
                                    <!-- ko if: !items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main"
                                        data-bind="text: items.arrivalDate.value().getDate()+' '+items.arrivalDate.value().getMonthNameShort()">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux"
                                        data-bind="text: ', '+items.arrivalDate.value().getDOWNameShort()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <div class="nemo-hotels-form__staying__segment__item nemo-hotels-form__staying__segment__item_date nemo-hotels-form__staying__segment__item_date_from"
                         data-bind="css: {'nemo-hotels-form__staying__segment__item_hasError': $parent.validaTERROR() && items.departureDate.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput nemo-hotels-form__staying__segment__item__date">
                            <div class="nemo-hotels-form__staying__segment__item__date__indicator"
                                 data-bind="text: items.departureDate.value() ? items.departureDate.value().getDate() : 31">
                            </div>
                            <div class="nemo-hotels-form__staying__segment__item__inputContainer">
                                <input
                                        class="nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__staying__segment__input nemo-hotels-form__staying__segment__input_date js-autofocus-field js-autofocus-field_date_departure"
                                        type="text"
                                        data-bind="attr: {placeholder: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')},hotelsFormDatepicker: items.departureDate.value,css: 'nemo-hotels-form__staying__segment__input_date_there',hasFocus: items.departureDate.focus" />

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__staying__segment__item__dummy nemo-hotels-form__staying__segment__item__date__dummy nemo-hotels-form__staying__segment__item__date__dummy_full">
                                    <!-- ko if: !items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__placeholder"
                                            data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__main"
                                            data-bind="text: items.departureDate.value().getDate()+' '+items.departureDate.value().getMonthName()">
                                    </span>
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__aux"
                                            data-bind="text: ', '+items.departureDate.value().getDOWName()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__staying__segment__item__dummy nemo-hotels-form__staying__segment__item__date__dummy nemo-hotels-form__staying__segment__item__date__dummy_short">
                                    <!-- ko if: !items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__placeholder"
                                            data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__main"
                                            data-bind="text: items.departureDate.value().getDate()+' '+items.departureDate.value().getMonthNameShort()">
                                    </span>
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__aux"
                                            data-bind="text: ', '+items.departureDate.value().getDOWNameShort()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="nemo-ui-select nemo-hotels-form__passengers">
                <div class="nemo-ui-select__toggle nemo-hotels-form__passengers__container js-hotels-searchForm-passSelect"
                     data-bind="
	        hotelsFormGuestsSelector: null,
	        text: guestsSummary,
	        css: {'nemo-ui-select__toggle_open': roomsFastSelectorOpen()}
    "></div>

                <div class="nemo-ui-select__toggle nemo-hotels-form__passengers__containerColumn js-hotels-searchForm-passSelect"
                     data-bind="
	        hotelsFormGuestsSelector: null,
	        text: guestsSummary,
	        css: {'nemo-ui-select__toggle_open': roomsFastSelectorOpen()}
    "></div>

                <div class="nemo-ui-select__dropdown nemo-hotels-form__passengers__fastSelect" data-bind="visible: roomsFastSelectorOpen">
                    <!-- ko foreach: roomsFastSelectOptions -->
                    <div class="nemo-ui-select__dropdown__item nemo-hotels-form__passengers__fastSelect__item"
                         data-bind="
		        text: $parent.roomsTextForFastSelect($index()),
		        click: function () {$parent.roomsFastSelectorOpen(false); $parent.roomsSelectFast($index());}
"       ></div>
                    <!-- /ko -->

                    <!-- ko if: roomsUseExtendedSelect -->
                    <div class="nemo-ui-select__dropdown__item nemo-hotels-form__passengers__fastSelect__item" data-bind="
			popup: {
				block: 'passengersFullSelect',
				title: $root.i18n('HotelsSearchForm','rooms__fullSelect__title'),
				dialogClass: 'no-overflow',
				buttons: [
					{
						text: $root.i18n('HotelsSearchForm','passengers__fullSelect__button__done'),
						click: function () {$(this).data('ui-popup__close')()}
					}
				],
			},
			click: function () {roomsFastSelectorOpen(false);},
			text: $root.i18n('HotelsSearchForm','rooms__fastSelect__fullSelectOption')
		"></div>
                    <!-- /ko -->
                </div>
            </div>
            <div class="nemo-hotels-form__buttonContainer">
                <button class="nemo-ui-button nemo-ui-button_main nemo-ui-button nemo-ui-button_main_form nemo-hotels-form__searchButton"
                        data-bind="
						click: startSearch,
						css: {
						},
						text: $root.i18n('HotelsSearchForm','searchButton__text')"></button>
            </div>

            <div  data-bind="attr: {'class':'nemo-hotels-form__stayingOptions nemo-hotels-form__stayingOptions_OW'}">
                <div class="nemo-hotels-form__stayingOptions__inner">
                    <div class="nemo-hotels-form__stayingOptions__item nemo-hotels-form__stayingOptions__item_example">
                        <span class="nemo-hotels-form__stayingOptions__item__title" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__title')"></span>
                        <span class="nemo-hotels-form__stayingOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town1')"></span>,
                        <span class="nemo-hotels-form__stayingOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town2')"></span>,
                        <span class="nemo-hotels-form__stayingOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town3')"></span>
                    </div>
                    <div class="nemo-hotels-form__stayingOptions__item nemo-hotels-form__stayingOptions__item_direct">
                    <label class="nemo-ui-checkbox nemo-hotels-form__stayingOptions__item__checkbox">
                        <input class="nemo-ui-checkbox__input" type="checkbox" data-bind="checked: datesUnknown">
							<span class="nemo-ui-checkbox__caption nemo-hotels-form__stayingOptions__item__checkbox__caption"
                                  data-bind="text: $root.i18n('HotelsSearchForm','routeOptions__direct__caption')"></span>
                    </label>
                </div>
                </div>
            </div>
        </div>

    </div>

    <div class="nemo-hotels-form__additional">
        <div class="nemo-ui-select js-common-pseudoSelect nemo-hotels-form__additional__item nemo-hotels-form__additional__parameters">
            <div class="nemo-ui-select__toggle js-common-pseudoSelect__toggle nemo-hotels-form__additional__parameters__toggle"
                 data-bind="text: $root.i18n('HotelsSearchForm','additionalParameters__toggle'),pseudoSelect: {adjustWidth: false},click: function (d, e) {$(e.target).parents('.js-nemoApp__component').eq(0).find('.js-flights-searchForm-hiddenSelect').trigger('chosen:updated');}"></div>
            <div class="nemo-hotels-form__previousSearches nemo-ui-select__dropdown js-common-pseudoSelect__dropdown nemo-hotels-form__additional__parameters__dropdown"
                 data-bind="click: function (d,e) {e.stopPropagation();}">
                <div class="nemo-hotels-form__previousSearches_item">
                    <div class="nemo-hotels-form__previousSearches_item_close"></div>
                    <div class="nemo-hotels-form__previousSearches_title">
                        <div class="nemo-hotels-form__previousSearches_title_object">Гостиничный комплекс "Постоялый двор"</div>
                        <div class="nemo-hotels-form__previousSearches_title_location">Москва, Россия</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_info">
                        <div class="nemo-hotels-form__previousSearches_info_date">25.08 - 29.08</div>
                        <div class="nemo-hotels-form__previousSearches_info_guests">5 гостей, 2 номера</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_price">
                        <div class="nemo-hotels-form__previousSearches_price_value">от 1000 р</div>
                        <div class="nemo-hotels-form__previousSearches_price_details">за 6 ночей</div>
                    </div>
                </div>
                <div class="nemo-hotels-form__previousSearches_item">
                    <div class="nemo-hotels-form__previousSearches_item_close"></div>
                    <div class="nemo-hotels-form__previousSearches_title">
                        <div class="nemo-hotels-form__previousSearches_title_object">Гостиничный комплекс "Постоялый двор"</div>
                        <div class="nemo-hotels-form__previousSearches_title_location">Москва, Россия</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_info">
                        <div class="nemo-hotels-form__previousSearches_info_date">25.08 - 29.08</div>
                        <div class="nemo-hotels-form__previousSearches_info_guests">5 гостей, 2 номера</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_price">
                        <div class="nemo-hotels-form__previousSearches_price_value">от 1000 р</div>
                        <div class="nemo-hotels-form__previousSearches_price_details">за 6 ночей</div>
                    </div>
                </div>
                <div class="nemo-hotels-form__previousSearches_item">
                    <div class="nemo-hotels-form__previousSearches_item_close"></div>
                    <div class="nemo-hotels-form__previousSearches_title">
                        <div class="nemo-hotels-form__previousSearches_title_object">Гостиничный комплекс "Постоялый двор"</div>
                        <div class="nemo-hotels-form__previousSearches_title_location">Москва, Россия</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_info">
                        <div class="nemo-hotels-form__previousSearches_info_date">25.08 - 29.08</div>
                        <div class="nemo-hotels-form__previousSearches_info_guests">5 гостей, 2 номера</div>
                    </div>
                    <div class="nemo-hotels-form__previousSearches_price">
                        <div class="nemo-hotels-form__previousSearches_price_value">от 1000 р</div>
                        <div class="nemo-hotels-form__previousSearches_price_details">за 6 ночей</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nemo-hotels-form__additional__item nemo-hotels-form__additional__item_lastSearches">
            <!-- Last searches component -->
            <div class="" data-bind="component: {name: 'Flights/LastSearches/Controller', params: {}}"></div>
        </div>
    </div>

    <div data-block="passengersFullSelect" class="nemo-hotels-form__passengersPopUp js-nemoApp__popupBlock">
        <!-- ko foreach: rooms -->
        <div class="nemo-hotels-form__RoomsPopup__room"
             data-bind="css: {'nemo-hotels-form__RoomsPopup__room_more': $index() > 0}"
                >
            <button class="nemo-hotels-form__RoomsPopup__room__delete"
                    data-bind="
                    text: $root.i18n('HotelsSearchForm','rooms_delete'),
                    visible: $index() > 0,
                    click: function () { $parent.roomRemove($index()); }
                    "
                    ></button>
            <div class="nemo-hotels-form__RoomsPopup__room__title"
                 data-bind="text: $root.i18n('HotelsSearchForm','rooms_room') + ' ' + ($index() + 1)"
                    ></div>
            <div class="nemo-hotels-form__RoomsPopup__room__guests">
                <div class="nemo-hotels-form__RoomsPopup__room__guests__adults">
                    <div class="nemo-hotels-form__RoomsPopup__room__guests__title"
                         data-bind="text: $root.i18n('HotelsSearchForm','rooms_adults')"
                            ></div>
                    <div class="nemo-hotels-form__spinner">
                        <input data-bind="spinnerAdults: adults, spinnerOptions: { min: 1, max: 9, numberFormat: 'n' }, attr:{room: $index()}" />
                    </div>
                </div>
                <div class="nemo-hotels-form__RoomsPopup__room__guests__children">
                    <div class="nemo-hotels-form__RoomsPopup__room__guests__title"
                         data-bind="text: $root.i18n('HotelsSearchForm','rooms_infants')"
                            ></div>
                    <div class="nemo-hotels-form__spinner">
                        <input data-bind="spinnerInfants: infants().length, spinnerOptions: { min: 0, max: 4, numberFormat: 'n' }, attr:{room: $index()}" />
                    </div>
                </div>
            </div>
            <div class="nemo-hotels-form__RoomsPopup__room__ages">
                <div class="nemo-hotels-form__RoomsPopup__room__ages__title"
                     data-bind="text: infants().length > 0 ? $root.i18n('HotelsSearchForm','rooms_infants_ages') : ''"
                        >
                </div>
                <!-- ko foreach: infants -->
                <div class="nemo-hotels-form__yearsPicker_container js-nemo-hotels-form__yearsPicker_container"
                        data-bind="
                        infantsAgesSelector:null,
                        attr: {room: $parentContext.$index, infant:$index()}
                        ">

                    <div class="nemo-hotels-form__yearsPicker_drop js-nemo-hotels-form__yearsPicker_drop">
                        <!-- ko foreach: $parentContext.$parent.infantsAges -->
                        <div class="nemo-hotels-form__yearsPicker_drop_item"
                             data-bind="
                                text: $data,
                                click: function () {
                                    $parentContext.$parentContext.$parent.selectInfantAge($parentContext.$parentContext.$index(), $parentContext.$index(), $data);
                                }
                             "
                                ></div>
                        <!-- /ko -->
                        <div class="nemo-hotels-form__yearsPicker_drop_item"></div>
                        <div class="nemo-hotels-form__yearsPicker_drop_item"></div>
                    </div>
                    <select name="" class="nemo-hotels-form__yearsPicker_mobile js-nemo-hotels-form__yearsPicker_mobile"
                            data-bind="
                            options: $parentContext.$parent.infantsAges,
                            value: $data,
                            "
                            >
                    </select>
                </div>
                <!-- /ko -->
            </div>
        </div>
        <!-- /ko -->
        <button class="nemo-hotels-form__RoomsPopup_addRoomButton"
                data-bind="
                visible: rooms().length < 4,
                text: $root.i18n('HotelsSearchForm','rooms_room_add'),
                click: function () { roomAdd(); }
                "
                ></button>
    </div>
    <!-- ko if: isSearching () -->
    <div data-bind="
			automaticPopup: {
				title: $root.i18n('HotelsSearchForm','searchingInfo__title'),
				close: function () {abortSearch()},
				closeOnOverlayClick: false,
				contentClass: 'nemo-hotels-form__searchingInfoPopup',
				headerClass: 'ui-dialog-titlebar_progress nemo-hotels-form__searchingInfoPopup__header'
			}
		">
        <div class="nemo-hotels-form__searchingInfo nemo-hotels-form__searchingInfoPopup__content">
            <div class="nemo-hotels-form__searchingInfo__header" data-bind="text: $root.i18n('HotelsSearchForm','searchingInfo__header')"></div>

            <div class="nemo-hotels-form__searchingInfo__subHeader"
                 data-bind="
			text: $root.i18n('HotelsSearchForm','searchingInfo__info')
				.replace('[%-flightType-%]', $root.i18n('HotelsSearchForm', 'searchingInfo__flightType_OW'))
				.replace('[%-class-%]', $root.i18n('HotelsSearchForm', 'searchingInfo__class_' + serviceClass()))
		"></div>

            <div class="nemo-hotels-form__searchingInfo__segments" data-bind="css: {'nemo-hotels-form__searchingInfo__segments_RTLike': segments().length == 2}, foreach: segments"><div class="nemo-hotels-form__searchingInfo__segment"><div class="nemo-hotels-form__searchingInfo__segment__inner"><div class="nemo-hotels-form__searchingInfo__segment__date" data-bind="text: items.departureDate.value() ? items.departureDate.value().getDate() + ' ' + items.departureDate.value().getMonthName() + ', ' + items.departureDate.value().getDOWName() : ''"></div><div class="nemo-hotels-form__searchingInfo__segment__staying"><span class="nemo-hotels-form__searchingInfo__segment__staying__departure" data-bind="text: items.departure.value() ? items.departure.value().city.name || items.departure.value().name : ''"></span><span class="nemo-hotels-form__searchingInfo__segment__staying__arrival" data-bind="text: items.arrival.value() ? items.arrival.value().city.name || items.arrival.value().name : ''"></span></div></div></div></div>
        </div>		</div>
                                                                        <!-- /ko -->

                                                                        <!-- /ko -->

                                                                        <!-- ko if: $$error() -->
    <div data-bind="text: $$error()"></div>
                                                                        <!-- /ko -->

                                                                        <!-- ko if: $$loading() -->
    <div class="nemo-hotels-form__loader"></div>
                                                                        <!-- /ko -->
</div>