<!-- nemo-hotels-form_compact || nemo-hotels-form_twoThirds -->
<div class="nemo-hotels-form js-autofocus-form js-nemoApp__component"> <!-- MODIFIERS: nemo-hotels-form_compact || nemo-hotels-form_twoThirds -->
                                                                        <!-- ko if: !$$loading() && !$$error() -->

    <div class="nemo-hotels-form__formContainer">
        <!-- ko if: !searchAllowedByParamChange() -->
        <div
                class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__searchBlockedError"
                data-bind="text: $root.i18n('HotelsSearchForm','error_searchBlocked'), click: function (d,e) {$(e.target).hide()}"></div>
        <!-- /ko -->
        <div class="nemo-hotels-form__formContainer__inner">
            <div data-bind="attr: {'class':'nemo-hotels-form__route nemo-hotels-form__route_'+tripType()}, foreach: segments(), flightsFormAutoFocus: null">
                <div data-bind="attr: {'class': 'nemo-hotels-form__route__segment_RT js-autofocus-segment'}">
                    <!-- ko if: $index() != 1 -->
                    <div class="nemo-hotels-form__route__segment__item nemo-hotels-form__route__segment__item_to js-nemo-hotels-autocomplete"
                         data-bind="css: {'nemo-hotels-form__route__segment__item_hasError': $parent.validaTERROR() && items.arrival.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput js-autocomplete">
                            <!-- ko if: $parent.validaTERROR() && items.arrival.error() && items.arrival.focus() -->
                            <div class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__route__segment__item__error"
                                 data-bind="text: $root.i18n('HotelsSearchForm','error_arrival_'+items.arrival.error())"></div>
                            <!-- /ko -->
                            <div class="nemo-hotels-form__route__segment__item__inputContainer"><input
                                    class=" nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__route__segment__input nemo-hotels-form__route__segment__input_autocomplete js-autofocus-field js-autofocus-field_arrival"
                                    type="text"
                                    data-bind="flightsFormGeoAC: items.arrival.value, hasFocus: items.arrival.focus,attr: {placeholder: $root.i18n('HotelsSearchForm','segments__arrival__placeholder')}">

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__route__segment__item__dummy js-autocomplete-dummy">
                                    <!-- ko if: !items.arrival.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder js-autocomplete-dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__arrival__placeholder')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrival.value() -->
                                    <!-- ko with: items.arrival.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main js-autocomplete-dummy__main"
                                        data-bind="text: name">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux js-autocomplete-dummy__aux"
                                        data-bind="text: ', ' + country">
                                    </span>
                                    <!-- /ko -->
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <!-- /ko -->
                    <div class="nemo-hotels-form__route__segment__item nemo-hotels-form__route__segment__item_date"
                         data-bind="css: {'nemo-hotels-form__route__segment__item_hasError': $parent.validaTERROR() && items.arrivalDate.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput nemo-hotels-form__route__segment__item__date">
                            <div class="nemo-hotels-form__route__segment__item__date__indicator"
                                 data-bind="text: items.arrivalDate.value() ? items.arrivalDate.value().getDate() : 31">
                            </div>
                            <!-- ko if: $parent.validaTERROR() && items.arrivalDate.error() && items.arrivalDate.focus() -->
                            <div class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__route__segment__item__error"
                                 data-bind="text: $root.i18n('HotelsSearchForm','error_arrivalDate_'+items.arrivalDate.error());">
                            </div>
                            <!-- /ko -->
                            <div class="nemo-hotels-form__route__segment__item__inputContainer">
                                <input
                                    class="nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__route__segment__input nemo-hotels-form__route__segment__input_date js-autofocus-field js-autofocus-field_date_arrival"
                                    type="text"
                                    data-bind="attr: {placeholder: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')},flightsFormDatepicker: items.arrivalDate.value,css: 'nemo-hotels-form__route__segment__input_date_back',hasFocus: items.arrivalDate.focus" />

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__route__segment__item__dummy nemo-hotels-form__route__segment__item__date__dummy nemo-hotels-form__route__segment__item__date__dummy_full">
                                    <!-- ko if: !items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main"
                                        data-bind="text: items.arrivalDate.value().getDate()+' '+items.arrivalDate.value().getMonthName()">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux"
                                        data-bind="text: ', '+items.arrivalDate.value().getDOWName()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__route__segment__item__dummy nemo-hotels-form__route__segment__item__date__dummy nemo-hotels-form__route__segment__item__date__dummy_short">
                                    <!-- ko if: !items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__placeholder"
                                        data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_1')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.arrivalDate.value() -->
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__main"
                                        data-bind="text: items.arrivalDate.value().getDate()+' '+items.arrivalDate.value().getMonthNameShort()">
                                    </span>
                                    <span
                                        class="nemo-ui-dummiedInput__dummy__aux"
                                        data-bind="text: ', '+items.arrivalDate.value().getDOWNameShort()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <div class="nemo-hotels-form__route__segment__item nemo-hotels-form__route__segment__item_date"
                         data-bind="css: {'nemo-hotels-form__route__segment__item_hasError': $parent.validaTERROR() && items.departureDate.error()}">
                        <label class="nemo-ui-textInput nemo-ui-dummiedInput nemo-hotels-form__route__segment__item__date">
                            <div class="nemo-hotels-form__route__segment__item__date__indicator"
                                 data-bind="text: items.departureDate.value() ? items.departureDate.value().getDate() : 31">
                            </div>
                            <!-- ko if: $parent.validaTERROR() && items.departureDate.error() && items.departureDate.focus() -->
                            <div class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__route__segment__item__error"
                                 data-bind="text: $root.i18n('HotelsSearchForm','error_departureDate_'+items.departureDate.error());">
                            </div>
                            <!-- /ko -->
                            <div class="nemo-hotels-form__route__segment__item__inputContainer">
                                <input
                                        class="nemo-ui-textInput__input nemo-ui-dummiedInput__input nemo-hotels-form__route__segment__input nemo-hotels-form__route__segment__input_date js-autofocus-field js-autofocus-field_date_departure"
                                        type="text"
                                        data-bind="attr: {placeholder: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')},flightsFormDatepicker: items.departureDate.value,css: 'nemo-hotels-form__route__segment__input_date_there',hasFocus: items.departureDate.focus" />

                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__route__segment__item__dummy nemo-hotels-form__route__segment__item__date__dummy nemo-hotels-form__route__segment__item__date__dummy_full">
                                    <!-- ko if: !items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__placeholder"
                                            data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__main"
                                            data-bind="text: items.departureDate.value().getDate()+' '+items.departureDate.value().getMonthName()">
                                    </span>
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__aux"
                                            data-bind="text: ', '+items.departureDate.value().getDOWName()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                                <div class="nemo-ui-dummiedInput__dummy nemo-hotels-form__route__segment__item__dummy nemo-hotels-form__route__segment__item__date__dummy nemo-hotels-form__route__segment__item__date__dummy_short">
                                    <!-- ko if: !items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__placeholder"
                                            data-bind="text: $root.i18n('HotelsSearchForm','segments__date__placeholder_RT_leg_0')">
                                    </span>
                                    <!-- /ko -->
                                    <!-- ko if: items.departureDate.value() -->
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__main"
                                            data-bind="text: items.departureDate.value().getDate()+' '+items.departureDate.value().getMonthNameShort()">
                                    </span>
                                    <span
                                            class="nemo-ui-dummiedInput__dummy__aux"
                                            data-bind="text: ', '+items.departureDate.value().getDOWNameShort()">
                                    </span>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="nemo-ui-select nemo-hotels-form__passengers">
                <!-- ko if: validaTERROR() && passengersError() -->
                <div data-bind="text: $root.i18n('HotelsSearchForm','error_passengers_'+passengersError());" class="nemo-ui-hint nemo-ui-hint_warn nemo-hotels-form__passengers__error"></div>
                <!-- /ko -->

                <div class="nemo-ui-select__toggle nemo-hotels-form__passengers__container js-flights-searchForm-passSelect"
                     data-bind="
	        flightsFormPassengersSelector: null,
	        text: passengersSummary,
	        css: {'nemo-ui-select__toggle_open': passengersFastSelectorOpen()}
    "></div>

                <div class="nemo-ui-select__toggle nemo-hotels-form__passengers__containerColumn js-flights-searchForm-passSelect"
                     data-bind="
	        flightsFormPassengersSelector: null,
	        text: passengersSummary,
	        css: {'nemo-ui-select__toggle_open': passengersFastSelectorOpen()}
    "></div>

                <div class="nemo-ui-select__dropdown nemo-hotels-form__passengers__fastSelect" data-bind="visible: passengersFastSelectorOpen">
                    <!-- ko foreach: passengersFastSelectOptions -->
                    <div class="nemo-ui-select__dropdown__item nemo-hotels-form__passengers__fastSelect__item"
                         data-bind="
		        text: $parent.passengersTextForFastSelect($index()),
		        click: function () {$parent.passengersFastSelectorOpen(false); $parent.passengersSelectFast($index());}
"       ></div>
                    <!-- /ko -->

                    <!-- ko if: passengersUseExtendedSelect -->
                    <div class="nemo-ui-select__dropdown__item nemo-hotels-form__passengers__fastSelect__item" data-bind="
			popup: {
				block: 'passengersFullSelect',
				title: $root.i18n('HotelsSearchForm','passengers__fullSelect__title'),
				buttons: [
					{
						text: $root.i18n('HotelsSearchForm','passengers__fullSelect__button__done'),
						click: function () {$(this).data('ui-popup__close')()}
					}
				]
			},
			click: function () {passengersFastSelectorOpen(false);},
			text: $root.i18n('HotelsSearchForm','passengers__fastSelect__fullSelectOption')
		"></div>
                    <!-- /ko -->
                </div>
            </div>
            <div class="nemo-hotels-form__buttonContainer">
                <button class="nemo-ui-button nemo-ui-button_main nemo-ui-button nemo-ui-button_main_form nemo-hotels-form__searchButton"
                        data-bind="
						click: startSearch,
						css: {
							'nemo-ui-button_disabled': !searchEnabled(),
							'nemo-hotels-form__searchButton_searching': isSearching()
						},
						text: $root.i18n('HotelsSearchForm','searchButton__text')"></button>
            </div>

            <div  data-bind="attr: {'class':'nemo-hotels-form__routeOptions nemo-hotels-form__routeOptions_'+tripType()}">
                <div class="nemo-hotels-form__routeOptions__inner">
                    <div class="nemo-hotels-form__routeOptions__item nemo-hotels-form__routeOptions__item_example">
                        <span class="nemo-hotels-form__routeOptions__item__title" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__title')"></span>
                        <span class="nemo-hotels-form__routeOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town1')"></span>,
                        <span class="nemo-hotels-form__routeOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town2')"></span>,
                        <span class="nemo-hotels-form__routeOptions__item__town" data-bind="text: $root.i18n('HotelsSearchForm','segments__date__example__town3')"></span>
                    </div>
                    <div class="nemo-hotels-form__routeOptions__item nemo-hotels-form__routeOptions__item_direct">
                    <label class="nemo-ui-checkbox nemo-hotels-form__routeOptions__item__checkbox">
                        <input class="nemo-ui-checkbox__input" type="checkbox" data-bind="checked: directFlights">
							<span class="nemo-ui-checkbox__caption nemo-hotels-form__routeOptions__item__checkbox__caption"
                                  data-bind="text: $root.i18n('HotelsSearchForm','routeOptions__direct__caption')"></span>
                    </label>
                </div>
                </div>
            </div>		</div>

    </div>

    <div data-block="passengersFullSelect"
         class="nemo-hotels-form__passengersPopUp js-nemoApp__popupBlock"
         data-bind="foreach: {data: passengerTypesOrder, as: 'passType'}"
            >
        <!-- ko if: $parent.options.passengerCount[passType] &&  parseInt($parent.options.passengerCount[passType]) -->
        <div data-bind="attr: {'class': 'nemo-hotels-form__passengersPopUp__item nemo-hotels-form__passengersPopUp__item_' + passType}">
            <div class="nemo-hotels-form__passengersPopUp__item__header" data-bind="text: $root.i18n('HotelsSearchForm','passengerType_'+passType+'_passSelectorName')"></div>
            <div class="nemo-hotels-form__passengersPopUp__item__subheader" data-bind="text: $root.i18n('HotelsSearchForm','passengerType_'+passType+'_ageInfo')"></div>
            <div class="nemo-hotels-form__passengersPopUp__item__counts" data-bind="foreach: $parent.getPassengersCounts(passType)">
                <div
                        data-bind="
						text: $root.i18n('HotelsSearchForm','passengers_count_' + $data),
						attr: {'class':
								'nemo-hotels-form__passengersPopUp__item__count nemo-hotels-form__passengersPopUp__item__count_' + $data +
								(
									$parents[1].passengers()[passType] && $parents[1].passengers()[passType]() == $data ?
									' nemo-hotels-form__passengersPopUp__item__count_active' :
									''
								) +
								(
									$data > $parents[1].passengersRestrictions()[passType].max || $data < $parents[1].passengersRestrictions()[passType].min ?
									' nemo-hotels-form__passengersPopUp__item__count_disabled':
									''
								)
							},
						click: function () {$parents[1].setPassengers(passType, parseInt($data));}"
                        ></div>
            </div>
        </div>
        <!-- /ko -->
    </div>
                                                                        <!-- ko if: isSearching () -->
    <div data-bind="
			automaticPopup: {
				title: $root.i18n('HotelsSearchForm','searchingInfo__title'),
				close: function () {abortSearch()},
				closeOnOverlayClick: false,
				contentClass: 'nemo-hotels-form__searchingInfoPopup',
				headerClass: 'ui-dialog-titlebar_progress nemo-hotels-form__searchingInfoPopup__header'
			}
		">
        <div class="nemo-hotels-form__searchingInfo nemo-hotels-form__searchingInfoPopup__content">
            <div class="nemo-hotels-form__searchingInfo__header" data-bind="text: $root.i18n('HotelsSearchForm','searchingInfo__header')"></div>

            <div class="nemo-hotels-form__searchingInfo__subHeader"
                 data-bind="
			text: $root.i18n('HotelsSearchForm','searchingInfo__info')
				.replace('[%-flightType-%]', $root.i18n('HotelsSearchForm', 'searchingInfo__flightType_' + tripType()))
				.replace('[%-class-%]', $root.i18n('HotelsSearchForm', 'searchingInfo__class_' + serviceClass()))
		"></div>

            <div class="nemo-hotels-form__searchingInfo__segments" data-bind="css: {'nemo-hotels-form__searchingInfo__segments_RTLike': segments().length == 2}, foreach: segments"><div class="nemo-hotels-form__searchingInfo__segment"><div class="nemo-hotels-form__searchingInfo__segment__inner"><div class="nemo-hotels-form__searchingInfo__segment__date" data-bind="text: items.departureDate.value() ? items.departureDate.value().getDate() + ' ' + items.departureDate.value().getMonthName() + ', ' + items.departureDate.value().getDOWName() : ''"></div><div class="nemo-hotels-form__searchingInfo__segment__route"><span class="nemo-hotels-form__searchingInfo__segment__route__departure" data-bind="text: items.departure.value() ? items.departure.value().city.name || items.departure.value().name : ''"></span><span class="nemo-hotels-form__searchingInfo__segment__route__arrival" data-bind="text: items.arrival.value() ? items.arrival.value().city.name || items.arrival.value().name : ''"></span></div></div></div></div>
        </div>		</div>
                                                                        <!-- /ko -->

                                                                        <!-- ko if: searchError -->
    <div data-bind="automaticPopup: {title: $root.i18n('HotelsSearchForm','searchingError__title'), close: function () {searchError(false);}}">
        <div data-bind="text: searchError" style="display: none;"></div>
    </div>
                                                                        <!-- /ko -->
                                                                        <!-- /ko -->

                                                                        <!-- ko if: $$error() -->
    <div data-bind="text: $$error()"></div>
                                                                        <!-- /ko -->

                                                                        <!-- ko if: $$loading() -->
    <div class="nemo-hotels-form__loader"></div>
                                                                        <!-- /ko -->
</div>